/*!
 * @author Jan Nejedly support@3b-fly.eu
 * @copyright Jan Nejedly
 * @version 2.0.0
 * @license see license in 'LICENSE' file
*/

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,d,c){if(b){d=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var f=a[c];f in d||(d[f]={});d=d[f]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Number.isFinite",function(a){return a?a:function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a}},"es6","es3");
$jscomp.polyfill("Number.isInteger",function(a){return a?a:function(a){return Number.isFinite(a)?a===Math.floor(a):!1}},"es6","es3");var bbbfly=bbbfly||{};bbbfly.grid={};bbbfly.grid._onUpdate=function(){var a=this.GetControlsHolder();a&&Function.isFunction(a.SetOverflow)&&a.SetOverflow(bbbfly.Renderer.overflow.hidden,this.AutoSize?bbbfly.Renderer.overflow.hidden:bbfly.Renderer.overflow.auto,!1);return!0};
bbbfly.grid._onUpdated=function(){var a=this.GetControlsHolder(),b=a.ChildControls,d=0;this._Rows=[];this._Columns=[];if(b&&0<b.length){var c=a.Elm();ng_BeginMeasureElement(c);a=ng_ClientWidth(c);ng_EndMeasureElement(c);var f=b.length;c=Number.isInteger(this.MinColumnWidth)?Math.floor(a/this.MinColumnWidth):1;var g=Math.ceil(f/c);c=Math.ceil(f/g);1>c&&(c=1);f=Math.floor(a/c);Number.isInteger(this.MaxColumnWidth)&&(f=Math.min(f,this.MaxColumnWidth));var h=0,k=0;for(m in b){var e=b[m];this._Rows[k]||
(this._Rows[k]=[]);this._Columns[h]||(this._Columns[h]=[]);this._Rows[k].push(e);this._Columns[h].push(e);e._GridRow=k;e._GridColumn=h;k++;k===g&&(k=0,h++)}for(var l in this._Rows){b=this._Rows[l];var m=0;for(var n in b)e=b[n],g=e._GridColumn*f,h=f,e._GridColumn+1===c&&(h=a-g,Number.isInteger(this.MaxColumnWidth)&&(h=Math.min(h,this.MaxColumnWidth))),e.SetBounds({T:d,L:g,W:h})&&e.Update(),g=e.Bounds.H,Number.isNumber(g)||(e=e.Elm(),ng_BeginMeasureElement(e),g=ng_ClientHeight(e),ng_EndMeasureElement(e)),
g>m&&(m=g);d+=m}}this.AutoSize&&((l=this.GetControlsPanel())&&l.Bounds&&(Number.isNumber(l.Bounds.T)&&(d+=l.Bounds.T),Number.isNumber(l.Bounds.B)&&(d+=l.Bounds.B)),this.SetBounds({H:d})&&this.Update(!1),Function.isFunction(this.OnAutoSized)&&this.OnAutoSized());return!0};
bbbfly.Grid=function(a,b,d){a=a||{};ng_MergeDef(a,{Data:{AutoSize:!0,MinColumnWidth:200,MaxColumnWidth:void 0,_Rows:[],_Columns:[]},Events:{OnUpdate:bbbfly.grid._onUpdate,OnUpdated:bbbfly.grid._onUpdated,OnAutoSized:null}});return ngCreateControlAsType(a,"bbbfly.Frame",b,d)};ngUserControls=ngUserControls||[];ngUserControls.bbbfly_grid={OnInit:function(){ngRegisterControlType("bbbfly.Grid",bbbfly.Grid)}};
