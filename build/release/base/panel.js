/*!
 * @author Jan Nejedly support@3b-fly.eu
 * @copyright Jan Nejedly
 * @version 2.0.0
 * @license see license in 'LICENSE' file
*/

var bbbfly=bbbfly||{};bbbfly.panel={};
bbbfly.panel._doCreate=function(a,b,c){if(a.Data&&"undefined"!==typeof a.Data.Frame){var d={FramePanel:{},ControlsPanel:{}};Object.isObject(a.FramePanel)&&(d.FramePanel=a.FramePanel);Object.isObject(a.ControlsPanel)&&(d.ControlsPanel=a.ControlsPanel);ng_MergeDef(d,{FramePanel:{L:0,T:0,R:0,B:0,Type:"ngPanel",id:this.ID+"_F",ScrollBars:ssDefault,style:{zIndex:1}},ControlsPanel:{L:0,T:0,R:0,B:0,Type:"ngPanel",id:this.ID+"_P",ScrollBars:ssAuto,style:{zIndex:2},Controls:a.Controls,ModifyControls:a.ModifyControls}});
a.ParentReferences||(this.Controls={},this.Controls.Owner=this,b=this.Controls);c=ngCreateControls(d,void 0,c);this.ControlsPanel=c.ControlsPanel;this.ControlsPanel.Owner=this;this.FramePanel=c.FramePanel;this.FramePanel.Owner=this;delete a.Controls;delete a.ModifyControls;delete c.ControlsPanel;delete c.FramePanel;this.UpdateClassName();ngCloneRefs(b,c)}};bbbfly.panel._doUpdate=function(a){this.DoUpdateFrame(a);this.DoUpdateControlsPanel(a);return!0};
bbbfly.panel._doUpdateFrame=function(a){"undefined"===typeof a&&(a=this.Elm());if(a){var b=this.GetFramePanel();if(b&&(b=b.Elm())){var c=new ngStringBuilder;ng_BeginMeasureElement(a);var d=ng_ClientWidth(a),e=ng_ClientHeight(a);ng_EndMeasureElement(a);a={};ngc_ImgBox(c,this.ID,"bbbfly.Panel",0,this.Enabled,0,0,d,e,!1,this.Frame,"","",void 0,a);ng_SetInnerHTML(b,c.toString());this._FrameDims={T:a.Top.H,L:a.Left.W,R:a.Right.W,B:a.Bottom.H}}}};
bbbfly.panel._doUpdateImages=function(){ngc_ChangeBox(this.ID,0,this.Enabled,this.Frame)};bbbfly.panel._doUpdateControlsPanel=function(a){"undefined"===typeof a&&(a=this.Elm());var b=this.GetControlsPanel();if(a&&b){ng_BeginMeasureElement(a);var c=ng_ClientWidth(a),d=ng_ClientHeight(a);ng_EndMeasureElement(a);a=Object.isObject(this._FrameDims)?this._FrameDims:{T:0,L:0,R:0,B:0};b.SetBounds({W:c-a.L-a.R,H:d-a.T-a.B,T:a.T,L:a.L,R:null,B:null})}};
bbbfly.panel._updateClassName=function(){var a=this.Elm();a&&(a.className=this.GetClassName())};bbbfly.panel._getClassName=function(a){String.isString(a)||(a="");this.Enabled?this.Invalid&&(a+="Invalid"):a+="Disabled";return this.BaseClassName+a};bbbfly.panel._getFramePanel=function(){return this.FramePanel?this.FramePanel:null};bbbfly.panel._getControlsPanel=function(){return this.ControlsPanel?this.ControlsPanel:null};
bbbfly.panel._getControlsHolder=function(){return this.ControlsPanel?this.ControlsPanel:this};bbbfly.panel._setInvalid=function(a,b){a=!1!==a;b=!1!==b;if(this.Invalid===a)return!0;if(this.OnSetInvalid&&!this.OnSetInvalid(this,a,b))return!1;this.DoSetInvalid&&this.DoSetInvalid(a,b);return!0};bbbfly.panel._doSetInvalid=function(a,b){this.Invalid=!!a;this.UpdateClassName();b?this.Update():this.DoUpdateImages()};bbbfly.panel._onEnabledChanged=function(){this.UpdateClassName()};
bbbfly.Panel=function(a,b,c){a=a||{};ng_MergeDef(a,{ramePanel:null,ControlsPanel:null,ParentReferences:!0,Data:{Enabled:!0,Invalid:!1,Frame:void 0,_FrameDims:{}},Events:{OnEnabledChanged:bbbfly.panel._onEnabledChanged,OnSetInvalid:null},Methods:{DoCreate:bbbfly.panel._doCreate,DoUpdate:bbbfly.panel._doUpdate,DoUpdateFrame:bbbfly.panel._doUpdateFrame,DoUpdateImages:bbbfly.panel._doUpdateImages,DoUpdateControlsPanel:bbbfly.panel._doUpdateControlsPanel,UpdateClassName:bbbfly.panel._updateClassName,GetClassName:bbbfly.panel._getClassName,
GetFramePanel:bbbfly.panel._getFramePanel,GetControlsPanel:bbbfly.panel._getControlsPanel,GetControlsHolder:bbbfly.panel._getControlsHolder,SetInvalid:bbbfly.panel._setInvalid,DoSetInvalid:bbbfly.panel._doSetInvalid}});return ngCreateControlAsType(a,"ngPanel",b,c)};ngUserControls=ngUserControls||[];ngUserControls.bbbfly_panel={OnInit:function(){ngRegisterControlType("bbbfly.Panel",bbbfly.Panel)}};
