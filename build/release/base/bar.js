/*!
 * @author Jan Nejedly support@3b-fly.eu
 * @copyright Jan Nejedly
 * @version 2.0.1
 * @license see license in 'LICENSE' file
*/

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){b!=Array.prototype&&b!=Object.prototype&&(b[a]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,a,c,d){if(a){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var e=b[d];e in c||(c[e]={});c=c[e]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Number.isFinite",function(b){return b?b:function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a}},"es6","es3");
$jscomp.polyfill("Number.isInteger",function(b){return b?b:function(a){return Number.isFinite(a)?a===Math.floor(a):!1}},"es6","es3");var bbbfly=bbbfly||{};bbbfly.bar={};bbbfly.bar._doCreate=function(b,a,c){this.DoCreate.callParent(b,a,c);this.TrackChildControls();this._Stretcher||(this._Stretcher=this.CreateControl({Type:"bbbfly.Panel",W:1,H:1,Data:{Visible:!1}}))};
bbbfly.bar._createControlsDef=function(b,a){var c=this.CreateControlsDef.callParent(b,a);this.NeedsSlidePanel()&&null!==b.SlidePanel&&(Object.isObject(b.SlidePanel)&&(a.SlidePanel=ng_CopyVar(b.SlidePanel)),ng_MergeDef(a,{SlidePanel:{L:0,T:0,R:0,B:0,Type:"bbbfly.Panel",id:this.ID+"_S",style:{zIndex:150},className:"SlidePanel",Data:{_FrameProxy:null,_FrameHtml:""}}}),c=!0);return c};
bbbfly.bar._setControlsRef=function(b,a){b=this.SetControlsRef.callParent(b,a);a.SlidePanel&&(this.SlidePanel=a.SlidePanel,this.SlidePanel.Owner=this,delete a.SlidePanel,b=!0);return b};
bbbfly.bar._onUpdate=function(){var b=this.GetControlsHolder();if(b&&Function.isFunction(b.SetOverflow)){var a=bbbfly.bar._getBarOptions(this),c=bbbfly.bar._getAutoSize(a),d=c.major===bbbfly.Bar.autosize.none?bbbfly.Renderer.overflow.auto:bbbfly.Renderer.overflow.hidden;c=c.minor===bbbfly.Bar.autosize.none?bbbfly.Renderer.overflow.auto:bbbfly.Renderer.overflow.hidden;switch(a.Orientation){case bbbfly.Bar.orientation.vertical:b.SetOverflow(c,d,!1);break;case bbbfly.Bar.orientation.horizontal:b.SetOverflow(d,
c,!1)}}return!0};
bbbfly.bar._onUpdated=function(){var b=this.GetControlsHolder(),a=b.Elm();if(b=b.ChildControls){var c=bbbfly.bar._getBarOptions(this),d={value:{size:{major:0,minor:0},position:{major:0,minor:0},margin:{major:0,minor:0},idx:{major:0,minor:0},max:{pos:{major:0,minor:0},mpos:{major:0,minor:0}}}};switch(c.Orientation){case bbbfly.Bar.orientation.vertical:switch(c.Float){case bbbfly.Bar.float.left_top:d.direction={major:{start:"top",end:"bottom"},minor:{start:"left",end:"right"}};break;case bbbfly.Bar.float.right_top:d.direction=
{major:{start:"top",end:"bottom"},minor:{start:"right",end:"left"}};break;case bbbfly.Bar.float.left_bottom:d.direction={major:{start:"bottom",end:"top"},minor:{start:"left",end:"right"}};break;case bbbfly.Bar.float.right_bottom:d.direction={major:{start:"bottom",end:"top"},minor:{start:"right",end:"left"}}}a&&(ng_BeginMeasureElement(a),d.value.size={major:ng_ClientHeight(a),minor:ng_ClientWidth(a)},ng_EndMeasureElement(a));break;case bbbfly.Bar.orientation.horizontal:switch(c.Float){case bbbfly.Bar.float.left_top:d.direction=
{major:{start:"left",end:"right"},minor:{start:"top",end:"bottom"}};break;case bbbfly.Bar.float.right_top:d.direction={major:{start:"right",end:"left"},minor:{start:"top",end:"bottom"}};break;case bbbfly.Bar.float.left_bottom:d.direction={major:{start:"left",end:"right"},minor:{start:"bottom",end:"top"}};break;case bbbfly.Bar.float.right_bottom:d.direction={major:{start:"right",end:"left"},minor:{start:"bottom",end:"top"}}}a&&(ng_BeginMeasureElement(a),d.value.size={major:ng_ClientWidth(a),minor:ng_ClientHeight(a)},
ng_EndMeasureElement(a));break;default:return}d.value.autosize=bbbfly.bar._getAutoSize(c);d.value.padding=bbbfly.bar._getPaddings(d,c);d.value.margin.major=d.value.padding.major.start;d.value.margin.minor=d.value.padding.minor.start;for(var e in b)if(a=b[e],a.Visible&&(!this._Stretcher||a!==this._Stretcher)){var g=bbbfly.bar._getItemOptions(a,c),f=null;d.value.autosize.major===bbbfly.Bar.autosize.none&&0<d.value.idx.major&&(f=d.value.size.major);bbbfly.bar._positionCtrl(a,d,g,f)||(bbbfly.bar._newLine(d),
bbbfly.bar._positionCtrl(a,d,g));d.value.idx.major+=1}bbbfly.bar._closeLines(d);bbbfly.bar._autoSize(this,d);this._Stretcher&&bbbfly.bar._positionStretcher(this._Stretcher,d)}};bbbfly.bar._doUpdateControls=function(b){this.DoUpdateFramePanel(b);this.DoUpdateSlidePanel(b);this.DoUpdateControlsPanel(b)};bbbfly.bar._doUpdateSlidePanel=function(){var b=this.GetSlidePanel(),a=this.GetFrameDims();this.DoUpdatePanel(b,a)};bbbfly.bar._needsSlidePanel=function(){return!!this.SlideFrame};
bbbfly.bar._needsControlsPanel=function(){return this.NeedsSlidePanel()||this.NeedsFramePanel()};bbbfly.bar._isTrackedControlChanged=function(b,a){var c=bbbfly.bar._getBarOptions(this);if(!bbbfly.bar._getItemOptions(b,c).TrackChanges)return!1;c=b.Visible;var d=a.Visible;b=b.Bounds?b.Bounds:{};var e=a.Bounds?a.Bounds:{};a.Visible=c;a.Bounds=ng_CopyVar(b);return c!==d||b.H!==e.H||b.W!==e.W?!0:!1};bbbfly.bar._getSlideFrame=function(){return Object.isObject(this.SlideFrame)?this.SlideFrame:{}};
bbbfly.bar._getSlidePanel=function(){return this.SlidePanel?this.SlidePanel:null};
bbbfly.bar._getSlideDims=function(){var b=this.GetSlidePanel(),a=this.GetFrameDims();if(!Object.isObject(b))return a;var c=0,d=0,e=0,g=0,f=void 0,h=void 0,k=b.Bounds;b=b._FrameProxy;Object.isObject(k)&&(Number.isInteger(k.L)&&(c+=k.L),Number.isInteger(k.T)&&(d+=k.T),Number.isInteger(k.R)&&(e+=k.R),Number.isInteger(k.B)&&(g+=k.B));Object.isObject(b)&&(Number.isInteger(b.L.W)&&b.L.Visible&&(c+=b.L.W),Number.isInteger(b.T.H)&&b.T.Visible&&(d+=b.T.H),Number.isInteger(b.R.W)&&b.R.Visible&&(e+=b.R.W),Number.isInteger(b.B.H)&&
b.B.Visible&&(g+=b.B.H),Number.isInteger(b.C.W)&&b.C.Visible&&(f=b.C.W),Number.isInteger(b.C.H)&&b.C.Visible&&(h=b.C.H));return{L:c>a.L?c:a.L,T:d>a.T?d:a.T,R:e>a.R?e:a.R,B:g>a.B?g:a.B,W:f>a.W?f:a.W,H:h>a.H?h:a.H}};
bbbfly.bar._getBarOptions=function(b){b=ng_CopyVar(b.BarOptions);if("object"!==typeof b||null===b)b={};ng_MergeDef(b,{Orientation:bbbfly.Bar.orientation.horizontal,Float:bbbfly.Bar.float.left_top,HAutoSize:bbbfly.Bar.autosize.none,VAutoSize:bbbfly.Bar.autosize.none,PaddingTop:null,PaddingBottom:null,PaddingLeft:null,PaddingRight:null,TrackChanges:!1});return b};
bbbfly.bar._getItemOptions=function(b,a){b=ng_CopyVar(b.BarItemOptions);if("object"!==typeof b||null===b)b={};ng_MergeDef(b,{MarginTop:void 0,MarginBottom:void 0,MarginLeft:void 0,MarginRight:void 0,TrackChanges:a.TrackChanges});return b};
bbbfly.bar._getAutoSize=function(b){var a={major:bbbfly.Bar.autosize.none,minor:bbbfly.Bar.autosize.none};switch(b.Orientation){case bbbfly.Bar.orientation.vertical:Number.isInteger(b.VAutoSize)&&(a.major=b.VAutoSize);Number.isInteger(b.HAutoSize)&&(a.minor=b.HAutoSize);break;case bbbfly.Bar.orientation.horizontal:Number.isInteger(b.HAutoSize)&&(a.major=b.HAutoSize),Number.isInteger(b.VAutoSize)&&(a.minor=b.VAutoSize)}return a};
bbbfly.bar._getMargins=function(b,a){return{major:{start:bbbfly.bar._getMargin(b.direction.major.start,a),end:bbbfly.bar._getMargin(b.direction.major.end,a)},minor:{start:bbbfly.bar._getMargin(b.direction.minor.start,a),end:bbbfly.bar._getMargin(b.direction.minor.end,a)}}};bbbfly.bar._getMargin=function(b,a){var c=null;if(a)switch(b){case "left":c=a.MarginLeft;break;case "right":c=a.MarginRight;break;case "top":c=a.MarginTop;break;case "bottom":c=a.MarginBottom}return Number.isInteger(c)?c:0};
bbbfly.bar._getPaddings=function(b,a){b=b.direction;return{major:{start:bbbfly.bar._getPadding(b.major.start,a),end:bbbfly.bar._getPadding(b.major.end,a)},minor:{start:bbbfly.bar._getPadding(b.minor.start,a),end:bbbfly.bar._getPadding(b.minor.end,a)}}};bbbfly.bar._getPadding=function(b,a){var c=null;switch(b){case "left":c=a.PaddingLeft;break;case "right":c=a.PaddingRight;break;case "top":c=a.PaddingTop;break;case "bottom":c=a.PaddingBottom}return Number.isInteger(c)?c:0};
bbbfly.bar._getBoundNames=function(b){var a={};switch(b.direction.major.start){case "left":a.major={start:"L",end:"R",dim:"W"};break;case "right":a.major={start:"R",end:"L",dim:"W"};break;case "top":a.major={start:"T",end:"B",dim:"H"};break;case "bottom":a.major={start:"B",end:"T",dim:"H"};break;default:return null}switch(b.direction.minor.start){case "left":a.minor={start:"L",end:"R",dim:"W"};break;case "right":a.minor={start:"R",end:"L",dim:"W"};break;case "top":a.minor={start:"T",end:"B",dim:"H"};
break;case "bottom":a.minor={start:"B",end:"T",dim:"H"};break;default:return null}return a};bbbfly.bar._getFrameNames=function(b){return{major:{start:String.capitalize(b.direction.major.start),end:String.capitalize(b.direction.major.end)},minor:{start:String.capitalize(b.direction.minor.start),end:String.capitalize(b.direction.minor.end)}}};
bbbfly.bar._positionCtrl=function(b,a,c,d){var e=bbbfly.bar._getBoundNames(a);if(!Object.isObject(e))return!1;c=bbbfly.bar._getMargins(a,c);var g=a.value.margin.major,f=a.value.margin.minor;c.major.start>g&&(g=c.major.start);c.minor.start>f&&(f=c.minor.start);g=a.value.position.major+g;f=a.value.position.minor+f;var h={};h[e.major.start]=g;h[e.minor.start]=f;h[e.major.end]=void 0;h[e.minor.end]=void 0;b.SetBounds(h)&&b.Update();if(b=b.Elm()){ng_BeginMeasureElement(b);switch(e.major.dim){case "W":g+=
ng_ClientWidth(b);f+=ng_ClientHeight(b);break;case "H":g+=ng_ClientHeight(b),f+=ng_ClientWidth(b)}ng_EndMeasureElement(b)}if(Number.isInteger(d)&&(e=c.major.end,a.value.padding.major.end>e&&(e=a.value.padding.major.end),g+e>d))return!1;g>a.value.max.pos.major&&(a.value.max.pos.major=g);f>a.value.max.pos.minor&&(a.value.max.pos.minor=f);a.value.position.major=g;a.value.margin.major=c.major.end;g+=c.major.end;f+=c.minor.end;g>a.value.max.mpos.major&&(a.value.max.mpos.major=g);f>a.value.max.mpos.minor&&
(a.value.max.mpos.minor=f);return!0};bbbfly.bar._newLine=function(b){var a=b.value;a.position.major=0;a.position.minor=a.max.pos.minor;a.margin.major=b.value.padding.major.start;a.margin.minor=a.max.mpos.minor-a.max.pos.minor;a.idx.major=0;a.idx.minor+=1};
bbbfly.bar._closeLines=function(b){var a=b.value;a.position.major=a.max.pos.major;a.position.minor=a.max.pos.minor;a.margin.major=a.max.mpos.major-a.max.pos.major;a.margin.minor=a.max.mpos.minor-a.max.pos.minor;b.value.padding.major.end>a.margin.major&&(a.margin.major=b.value.padding.major.end);b.value.padding.minor.end>a.margin.minor&&(a.margin.minor=b.value.padding.minor.end)};
bbbfly.bar._positionStretcher=function(b,a){var c=a.value;c.autosize.major===bbbfly.Bar.autosize.none&&0<c.margin.major||c.autosize.minor===bbbfly.Bar.autosize.none&&0<c.margin.minor?(--c.margin.major,--c.margin.minor,bbbfly.bar._positionCtrl(b,a),b.SetVisible(!0)):b.SetVisible(!1)};bbbfly.bar._autoSize=function(b,a){(bbbfly.bar._stretch(b,a)||bbbfly.bar._slide(b,a))&&Function.isFunction(b.OnAutoSized)&&b.OnAutoSized()};
bbbfly.bar._stretch=function(b,a){var c=a.value,d=c.autosize.major===bbbfly.Bar.autosize.stretch,e=c.autosize.minor===bbbfly.Bar.autosize.stretch;if(!d&&!e)return!1;a=bbbfly.bar._getBoundNames(a);if(!Object.isObject(a))return!0;var g=c.position.major+c.margin.major;c=c.position.minor+c.margin.minor;var f=b.GetControlsPanel();if(f&&f.Bounds){var h=f.Bounds[a.major.start],k=f.Bounds[a.major.end],l=f.Bounds[a.minor.start];f=f.Bounds[a.minor.end];Number.isInteger(h)&&(g+=h);Number.isInteger(k)&&(g+=k);
Number.isInteger(l)&&(c+=l);Number.isInteger(f)&&(c+=f)}h={};d&&(h[a.major.dim]=g);e&&(h[a.minor.dim]=c);b.SetBounds(h)&&b.Update(!1);return!0};
bbbfly.bar._slide=function(b,a){var c=a.value,d=c.autosize.major===bbbfly.Bar.autosize.slide,e=c.autosize.minor===bbbfly.Bar.autosize.slide;if(!d&&!e)return!1;a=bbbfly.bar._getFrameNames(a);if(!Object.isObject(a))return!0;var g=b.GetSlidePanel();if(!g)return!0;var f=c.size;c=c.max.pos;d&&(d=f.major<c.major);e&&(e=f.minor<c.minor);c=d||e?b.GetSlideFrame():null;Object.isObject(c)&&(c=ng_CopyVar(c),d||(delete c[a.major.start],delete c[a.major.end]),e||(delete c[a.minor.start],delete c[a.minor.end]));
b.DoUpdateFrame(g,c);d=b.GetControlsPanel();if(!d)return!0;e=b.GetSlideDims();b.DoUpdatePanel(d,e);return!0};
bbbfly.Bar=function(b,a,c){b=b||{};ng_MergeDef(b,{Data:{BarOptions:void 0,SlideFrame:void 0,_Stretcher:null},SlidePanel:void 0,Events:{OnUpdate:bbbfly.bar._onUpdate,OnUpdated:bbbfly.bar._onUpdated,OnAutoSized:null},Methods:{DoCreate:bbbfly.bar._doCreate,CreateControlsDef:bbbfly.bar._createControlsDef,SetControlsRef:bbbfly.bar._setControlsRef,DoUpdateControls:bbbfly.bar._doUpdateControls,DoUpdateSlidePanel:bbbfly.bar._doUpdateSlidePanel,NeedsSlidePanel:bbbfly.bar._needsSlidePanel,NeedsControlsPanel:bbbfly.bar._needsControlsPanel,
IsTrackedControlChanged:bbbfly.bar._isTrackedControlChanged,GetSlideFrame:bbbfly.bar._getSlideFrame,GetSlidePanel:bbbfly.bar._getSlidePanel,GetSlideDims:bbbfly.bar._getSlideDims}});return ngCreateControlAsType(b,"bbbfly.Frame",a,c)};bbbfly.Bar.orientation={vertical:1,horizontal:2};bbbfly.Bar.float={left_top:1,right_top:2,left_bottom:3,right_bottom:4};bbbfly.Bar.autosize={none:0,stretch:1,slide:2};ngUserControls=ngUserControls||[];
ngUserControls.bbbfly_bar={OnInit:function(){ngRegisterControlType("bbbfly.Bar",bbbfly.Bar)}};
