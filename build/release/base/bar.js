/*!
 * @author Jan Nejedly support@3b-fly.eu
 * @copyright Jan Nejedly
 * @version 2.0.0
 * @license see license in 'LICENSE' file
*/

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){b!=Array.prototype&&b!=Object.prototype&&(b[a]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,a,c,d){if(a){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var f=b[d];f in c||(c[f]={});c=c[f]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Number.isFinite",function(b){return b?b:function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a}},"es6","es3");
$jscomp.polyfill("Number.isInteger",function(b){return b?b:function(a){return Number.isFinite(a)?a===Math.floor(a):!1}},"es6","es3");var bbbfly=bbbfly||{};bbbfly.bar={};bbbfly.bar._doCreate=function(b,a,c){this.DoCreate.callParent(b,a,c);this.TrackChildControls();this._Stretcher||(this._Stretcher=this.CreateControl({Type:"bbbfly.Panel",W:1,H:1,Data:{Visible:!1}}))};
bbbfly.bar._onUpdate=function(){var b=this.GetControlsHolder();if(b&&Function.isFunction(b.SetOverflow)){var a=bbbfly.bar._getBarOptions(this),c=bbbfly.bar._getAutoSize(a),d=c.major===bbbfly.Bar.autosize.none?bbbfly.Renderer.overflow.auto:bbbfly.Renderer.overflow.hidden;c=c.minor===bbbfly.Bar.autosize.none?bbbfly.Renderer.overflow.auto:bbbfly.Renderer.overflow.hidden;switch(a.Orientation){case bbbfly.Bar.orientation.vertical:b.SetOverflow(c,d,!1);break;case bbbfly.Bar.orientation.horizontal:b.SetOverflow(d,
c,!1)}}return!0};
bbbfly.bar._onUpdated=function(){var b=this.GetControlsHolder(),a=b.Elm();if(b=b.ChildControls){var c=bbbfly.bar._getBarOptions(this),d={value:{size:{major:0,minor:0},position:{major:0,minor:0},margin:{major:0,minor:0},idx:{major:0,minor:0},max:{pos:{major:0,minor:0},mpos:{major:0,minor:0}}}};switch(c.Orientation){case bbbfly.Bar.orientation.vertical:switch(c.Float){case bbbfly.Bar.float.left_top:d.direction={major:{start:"top",end:"bottom"},minor:{start:"left",end:"right"}};break;case bbbfly.Bar.float.right_top:d.direction=
{major:{start:"top",end:"bottom"},minor:{start:"right",end:"left"}};break;case bbbfly.Bar.float.left_bottom:d.direction={major:{start:"bottom",end:"top"},minor:{start:"left",end:"right"}};break;case bbbfly.Bar.float.right_bottom:d.direction={major:{start:"bottom",end:"top"},minor:{start:"right",end:"left"}}}a&&(ng_BeginMeasureElement(a),d.value.size={major:ng_ClientHeight(a),minor:ng_ClientWidth(a)},ng_EndMeasureElement(a));break;case bbbfly.Bar.orientation.horizontal:switch(c.Float){case bbbfly.Bar.float.left_top:d.direction=
{major:{start:"left",end:"right"},minor:{start:"top",end:"bottom"}};break;case bbbfly.Bar.float.right_top:d.direction={major:{start:"right",end:"left"},minor:{start:"top",end:"bottom"}};break;case bbbfly.Bar.float.left_bottom:d.direction={major:{start:"left",end:"right"},minor:{start:"bottom",end:"top"}};break;case bbbfly.Bar.float.right_bottom:d.direction={major:{start:"right",end:"left"},minor:{start:"bottom",end:"top"}}}a&&(ng_BeginMeasureElement(a),d.value.size={major:ng_ClientWidth(a),minor:ng_ClientHeight(a)},
ng_EndMeasureElement(a));break;default:return}d.value.autosize=bbbfly.bar._getAutoSize(c);d.value.padding=bbbfly.bar._getPaddings(d,c);d.value.margin.major=d.value.padding.major.start;d.value.margin.minor=d.value.padding.minor.start;for(var f in b)if(a=b[f],a.Visible&&(!this._Stretcher||a!==this._Stretcher)){var g=bbbfly.bar._getItemOptions(a,c),e=null;d.value.autosize.major===bbbfly.Bar.autosize.none&&0<d.value.idx.major&&(e=d.value.size.major);bbbfly.bar._positionCtrl(a,d,g,e)||(bbbfly.bar._newLine(d),
bbbfly.bar._positionCtrl(a,d,g));d.value.idx.major+=1}bbbfly.bar._closeLines(d);bbbfly.bar._autoSize(this,d);this._Stretcher&&bbbfly.bar._positionStretcher(this._Stretcher,d)}};bbbfly.bar._isTrackedControlChanged=function(b,a){var c=bbbfly.bar._getBarOptions(this);if(!bbbfly.bar._getItemOptions(b,c).TrackChanges)return!1;c=b.Visible;var d=a.Visible;b=b.Bounds?b.Bounds:{};var f=a.Bounds?a.Bounds:{};a.Visible=c;a.Bounds=ng_CopyVar(b);return c!==d||b.H!==f.H||b.W!==f.W?!0:!1};
bbbfly.bar._getBarOptions=function(b){b=ng_CopyVar(b.BarOptions);if("object"!==typeof b||null===b)b={};ng_MergeDef(b,{Orientation:bbbfly.Bar.orientation.horizontal,Float:bbbfly.Bar.float.left_top,HAutoSize:bbbfly.Bar.autosize.none,VAutoSize:bbbfly.Bar.autosize.none,PaddingTop:null,PaddingBottom:null,PaddingLeft:null,PaddingRight:null,TrackChanges:!1});return b};
bbbfly.bar._getItemOptions=function(b,a){b=ng_CopyVar(b.BarItemOptions);if("object"!==typeof b||null===b)b={};ng_MergeDef(b,{MarginTop:void 0,MarginBottom:void 0,MarginLeft:void 0,MarginRight:void 0,TrackChanges:a.TrackChanges});return b};
bbbfly.bar._getAutoSize=function(b){var a={major:bbbfly.Bar.autosize.none,minor:bbbfly.Bar.autosize.none};switch(b.Orientation){case bbbfly.Bar.orientation.vertical:Number.isInteger(b.VAutoSize)&&(a.major=b.VAutoSize);Number.isInteger(b.HAutoSize)&&(a.minor=b.HAutoSize);break;case bbbfly.Bar.orientation.horizontal:Number.isInteger(b.HAutoSize)&&(a.major=b.HAutoSize),Number.isInteger(b.VAutoSize)&&(a.minor=b.VAutoSize)}return a};
bbbfly.bar._getMargins=function(b,a){return{major:{start:bbbfly.bar._getMargin(b.direction.major.start,a),end:bbbfly.bar._getMargin(b.direction.major.end,a)},minor:{start:bbbfly.bar._getMargin(b.direction.minor.start,a),end:bbbfly.bar._getMargin(b.direction.minor.end,a)}}};bbbfly.bar._getMargin=function(b,a){var c=null;if(a)switch(b){case "left":c=a.MarginLeft;break;case "right":c=a.MarginRight;break;case "top":c=a.MarginTop;break;case "bottom":c=a.MarginBottom}return Number.isInteger(c)?c:0};
bbbfly.bar._getPaddings=function(b,a){b=b.direction;return{major:{start:bbbfly.bar._getPadding(b.major.start,a),end:bbbfly.bar._getPadding(b.major.end,a)},minor:{start:bbbfly.bar._getPadding(b.minor.start,a),end:bbbfly.bar._getPadding(b.minor.end,a)}}};bbbfly.bar._getPadding=function(b,a){var c=null;switch(b){case "left":c=a.PaddingLeft;break;case "right":c=a.PaddingRight;break;case "top":c=a.PaddingTop;break;case "bottom":c=a.PaddingBottom}return Number.isInteger(c)?c:0};
bbbfly.bar._getBoundNames=function(b){var a={};switch(b.direction.major.start){case "left":a.major={start:"L",end:"R",dim:"W"};break;case "right":a.major={start:"R",end:"L",dim:"W"};break;case "top":a.major={start:"T",end:"B",dim:"H"};break;case "bottom":a.major={start:"B",end:"T",dim:"H"};break;default:return null}switch(b.direction.minor.start){case "left":a.minor={start:"L",end:"R",dim:"W"};break;case "right":a.minor={start:"R",end:"L",dim:"W"};break;case "top":a.minor={start:"T",end:"B",dim:"H"};
break;case "bottom":a.minor={start:"B",end:"T",dim:"H"};break;default:return null}return a};
bbbfly.bar._positionCtrl=function(b,a,c,d){var f=bbbfly.bar._getBoundNames(a);if(!Object.isObject(f))return!1;c=bbbfly.bar._getMargins(a,c);var g=a.value.margin.major,e=a.value.margin.minor;c.major.start>g&&(g=c.major.start);c.minor.start>e&&(e=c.minor.start);g=a.value.position.major+g;e=a.value.position.minor+e;var h={};h[f.major.start]=g;h[f.minor.start]=e;h[f.major.end]=void 0;h[f.minor.end]=void 0;b.SetBounds(h)&&b.Update();if(b=b.Elm()){ng_BeginMeasureElement(b);switch(f.major.dim){case "W":g+=
ng_ClientWidth(b);e+=ng_ClientHeight(b);break;case "H":g+=ng_ClientHeight(b),e+=ng_ClientWidth(b)}ng_EndMeasureElement(b)}if(Number.isInteger(d)&&(f=c.major.end,a.value.padding.major.end>f&&(f=a.value.padding.major.end),g+f>d))return!1;g>a.value.max.pos.major&&(a.value.max.pos.major=g);e>a.value.max.pos.minor&&(a.value.max.pos.minor=e);a.value.position.major=g;a.value.margin.major=c.major.end;g+=c.major.end;e+=c.minor.end;g>a.value.max.mpos.major&&(a.value.max.mpos.major=g);e>a.value.max.mpos.minor&&
(a.value.max.mpos.minor=e);return!0};bbbfly.bar._newLine=function(b){var a=b.value;a.position.major=0;a.position.minor=a.max.pos.minor;a.margin.major=b.value.padding.major.start;a.margin.minor=a.max.mpos.minor-a.max.pos.minor;a.idx.major=0;a.idx.minor+=1};
bbbfly.bar._closeLines=function(b){var a=b.value;a.position.major=a.max.pos.major;a.position.minor=a.max.pos.minor;a.margin.major=a.max.mpos.major-a.max.pos.major;a.margin.minor=a.max.mpos.minor-a.max.pos.minor;b.value.padding.major.end>a.margin.major&&(a.margin.major=b.value.padding.major.end);b.value.padding.minor.end>a.margin.minor&&(a.margin.minor=b.value.padding.minor.end)};
bbbfly.bar._positionStretcher=function(b,a){var c=a.value;c.autosize.major===bbbfly.Bar.autosize.none&&0<c.margin.major||c.autosize.minor===bbbfly.Bar.autosize.none&&0<c.margin.minor?(--c.margin.major,--c.margin.minor,bbbfly.bar._positionCtrl(b,a),b.SetVisible(!0)):b.SetVisible(!1)};bbbfly.bar._autoSize=function(b,a){(bbbfly.bar._stretch(b,a)||bbbfly.bar._slide(b,a))&&Function.isFunction(b.OnAutoSized)&&b.OnAutoSized()};
bbbfly.bar._stretch=function(b,a){var c=a.value,d=c.autosize.major===bbbfly.Bar.autosize.stretch,f=c.autosize.minor===bbbfly.Bar.autosize.stretch;if(!d&&!f)return!1;a=bbbfly.bar._getBoundNames(a);if(!Object.isObject(a))return!1;var g=c.position.major+c.margin.major;c=c.position.minor+c.margin.minor;var e=b.GetControlsPanel();if(e&&e.Bounds){var h=e.Bounds[a.major.start],k=e.Bounds[a.major.end],l=e.Bounds[a.minor.start];e=e.Bounds[a.minor.end];Number.isInteger(h)&&(g+=h);Number.isInteger(k)&&(g+=k);
Number.isInteger(l)&&(c+=l);Number.isInteger(e)&&(c+=e)}h={};d&&(h[a.major.dim]=g);f&&(h[a.minor.dim]=c);return b.SetBounds(h)?(b.Update(!1),!0):!1};bbbfly.bar._slide=function(b,a){return!1};
bbbfly.Bar=function(b,a,c){b=b||{};ng_MergeDef(b,{Data:{BarOptions:void 0,_Stretcher:null},Events:{OnUpdate:bbbfly.bar._onUpdate,OnUpdated:bbbfly.bar._onUpdated,OnAutoSized:null},Methods:{DoCreate:bbbfly.bar._doCreate,IsTrackedControlChanged:bbbfly.bar._isTrackedControlChanged}});return ngCreateControlAsType(b,"bbbfly.Frame",a,c)};bbbfly.Bar.orientation={vertical:1,horizontal:2};bbbfly.Bar.float={left_top:1,right_top:2,left_bottom:3,right_bottom:4};bbbfly.Bar.autosize={none:0,stretch:1,slide:2};
ngUserControls=ngUserControls||[];ngUserControls.bbbfly_bar={OnInit:function(){ngRegisterControlType("bbbfly.Bar",bbbfly.Bar)}};
