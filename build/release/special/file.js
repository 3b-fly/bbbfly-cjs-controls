/*!
 * @author Jan Nejedly support@3b-fly.eu
 * @copyright Jan Nejedly
 * @version 2.0.1
 * @license see license in 'LICENSE' file
*/

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Number.isFinite",function(a){return a?a:function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a}},"es6","es3");
$jscomp.polyfill("Number.isInteger",function(a){return a?a:function(a){return Number.isFinite(a)?a===Math.floor(a):!1}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;for(c=c||0;c<e;c++)if(b[c]==a||Object.is(b[c],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6","es3");var bbbfly=bbbfly||{};bbbfly.fileuploader={};
bbbfly.fileloader={};bbbfly.fileuploader._getRPC=function(){this._RPC||(this._RPC=this.CreateRPC());return this._RPC};bbbfly.fileuploader._getForm=function(){return this._Form};bbbfly.fileuploader._getIframe=function(){return this._Iframe};
bbbfly.fileuploader._updateForm=function(){var a=this.GetForm();if(a&&(a=a["files[]"])){var b="",c=!0;Array.isArray(this.AllowedExtensions)&&0<this.AllowedExtensions.length&&(b=this.AllowedExtensions.join(",."),""!==b&&(b="."+b));Number.isInteger(this.MaxFilesCount)&&(c=!(2>this.MaxFilesCount));a.accept=b;a.multiple=c}};
bbbfly.fileuploader._createRPC=function(){var a=new ngRPC("UploadFiles");a.nocache=!0;a.Type=rpcJSONPOST;a.OnHTTPRequest=bbbfly.fileuploader._onRPCUpload;a.OnReceivedJSON=bbbfly.fileuploader._onRPCUploaded;a.OnHTTPRequestFailed=bbbfly.fileuploader._onRPCUploadFailed;a.FileFormData=null;a.Owner=this;return a};
bbbfly.fileuploader._createForm=function(){var a=ngOpera&&12>ngOperaVersion;a=!(ngFireFox&&22>ngFireFoxVersion)&&!a;var b=document.createElement("form");b.setAttribute("id",this.ID+"_FO");b.setAttribute("target",this.ID+"_IF");b.setAttribute("action","");b.setAttribute("method","POST");b.setAttribute("enctype","multipart/form-data");b.style.cssText="position:absolute;margin:0px;padding:0px;left:0px;top:0px;width:100%;height:100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0);opacity:0;-moz-opacity:0;z-index:400;";
var c=document.createElement("input");c.setAttribute("id",this.ID+"_FO_I");c.setAttribute("name","files[]");c.setAttribute("type","file");c.setAttribute("size","100");c.style.cssText="position:absolute;margin:0px;padding:0px;left:-100%;top:0px;height:100%;width:"+(a?"100%":"200%")+";font-size:10000px;cursor:pointer !important;";var d=this;c.onchange=function(){bbbfly.fileuploader._onFormFilesChange(b,d)};b.appendChild(c);a&&(a=document.createElement("label"),a.setAttribute("id",this.ID+"_FO_L"),a.setAttribute("for",
this.ID+"_FO_I"),a.style.cssText="position:absolute;margin:0px;padding:0px;left:0px;top:0px;width:100%;height:100%;cursor:pointer !important;",b.appendChild(a));return this._Form=b};
bbbfly.fileuploader._createIframe=function(){var a=document.createElement("iframe");a._initialized=!1;a.setAttribute("id",this.ID+"_IF");a.setAttribute("name",this.ID+"_IF");a.setAttribute("scrolling","no");a.setAttribute("frameborder","0");a.style.cssText="position:absolute;width:1px;height:1px;left:-1px;top:-1px;overflow:hidden;border:0px;";var b=this;a.onload=function(){bbbfly.fileuploader._onIframeLoad(a,b)};return this._IFrame=a};
bbbfly.fileuploader._onCreated=function(a){var b=a.Elm();b&&(a=a.CreateIframe())&&b.appendChild(a)};bbbfly.fileuploader._onUpdated=function(){this.SetDragAndDrop(this.DragAndDrop);this.UpdateForm()};bbbfly.fileuploader._reset=function(){var a=this.Controls.FilesList;a&&a.Clear();a=0<this._Files.length;this._Files=[];this.Update();this.HideProgress();a&&Function.isFunction(this.OnFilesChanged)&&this.OnFilesChanged()};
bbbfly.fileuploader._isValid=function(){var a=this.GetUploadedFiles(),b=this.MinFilesCount,c=this.MaxFilesCount;return Number.isInteger(b)&&a.length<b||Number.isInteger(c)&&a.length>c?!1:!0};bbbfly.fileuploader._getUploadedFiles=function(){return Array.isArray(this._Files)?this._Files:[]};
bbbfly.fileuploader._getSelectedFiles=function(){var a=this.GetUploadedFiles(),b=this.Controls.FilesList,c={};if(1===this.MaxFilesCount&&1===a.length){var d=a[0];c[d.Id]=d;return c}if(b&&(a=b.GetSelected(),0<a.length)){for(d in a)(b=a[d])&&b.File&&(c[b.File.Id]=b.File);return c}return null};
bbbfly.fileuploader._onFormFilesChange=function(a,b){a||(a=b.GetForm());if(a){if(0<b.GetFormFiles(a).length)b.UploadFiles(a);else{var c=a["files[]"];if(c){c=c.value;var d=c.lastIndexOf("\\")+1;(c=c.substring(d,c.length))&&b.UploadFiles(a)}}a.reset()}};
bbbfly.fileuploader._uploadFiles=function(a){a||(a=this.GetForm());if(a&&String.isString(this.UploadURL)){var b={id:this.FileUploadID,ts:(new Date).getTime()};Function.isFunction(this.OnGetRequestParams)&&this.OnGetRequestParams(b);var c="",d;for(d in b)c+=c?"&":"?",c+=encodeURIComponent(d)+"=",c+=encodeURIComponent(b[d]);if(window.FormData){var e=this.GetRPC();if(e){e.clearParams();e.FileFormData=new FormData(a);for(d in b)e.SetParam(d,b[d]);e.sendRequest(this.UploadURL);return}}this.ShowProgress(!0);
a.action=this.UploadURL+c;a.submit()}};bbbfly.fileuploader._onRPCUpload=function(a,b){if(!a.FileFormData)return!0;var c=this.Owner;b.XMLHttp.upload&&(c.ShowProgress(!1),b.XMLHttp.onload=function(){c.UpdateProgress(100)},b.XMLHttp.upload.onprogress=function(a){a.lengthComputable&&a.total&&c.UpdateProgress(a.loaded/a.total*100)});delete b.ReqHeaders["Content-type"];delete b.ReqHeaders["Content-length"];b.PostParams=a.FileFormData;if(a=a.GetURLParams())b.URL=ng_AddURLParam(b.URL,a);return!0};
bbbfly.fileuploader._onRPCUploaded=function(a,b){Object.isObject(b)||Array.isArray(b)?(a=a.Owner,a.AddUploadedFiles(b),a.HideProgress()):bbbfly.fileuploader._onRPCUploadFailed(a)};bbbfly.fileuploader._onRPCUploadFailed=function(a){a=a.Owner;a.AddUploadedFiles({Error:bbbfly.FileUploader.errortype.main});a.HideProgress()};
bbbfly.fileuploader._onIframeLoad=function(a,b){if(b&&(a||(a=b.GetIframe()),a)){var c=a.contentDocument||a.contentWindow.document;if(c&&c.body)if(c=c.body.innerText,String.isString(c)||(c=""),""!==c||a._initialized){a=null;try{a=JSON.parse(c)}catch(d){}a||(a={Error:bbbfly.FileUploader.errortype.main});b.AddUploadedFiles(a);b.HideProgress()}else a._initialized=!0}};
bbbfly.fileuploader._getFormFiles=function(a){a||(a=uploader.GetForm());if(!a)return[];a=a["files[]"];if(!a)return[];a=a.files;var b=[];if(Array.isArray(a)){if(this.ValidateFiles(a))for(var c in a){var d=a[c];d.name&&b.push(d)}}else if(a instanceof FileList&&(d=a.length,0<d))for(c=0;c<d;c++)b.push(a.item(c));return b};
bbbfly.fileuploader._validateFiles=function(a){var b=Number.isInteger(this.MaxFilesCount),c=Number.isInteger(this.MaxFileSize),d=Number.isInteger(this.MaxBatchSize),e=Array.isArray(this.AllowedExtensions),f=[];b&&this.GetUploadedFiles().length+a.length>this.MaxFilesCount&&f.push({Error:{Type:bbbfly.FileUploader.errortype.count,Data:this.MaxFilesCount}});if(1>f.length){b=0;if(c||d||e)for(var g in a){var h=a[g];if(Object.isObject(h)){var k=h.name;if(String.isString(k)&&(k=k.toLowerCase(),e)){var l=
k.lastIndexOf(".");l=0<=l?k.substr(l+1):null;if(!this.AllowedExtensions.includes(l)){f.push({Name:k,Error:{Type:bbbfly.FileUploader.errortype.extension,Data:this.AllowedExtensions.join(", ")}});continue}}(c||d)&&"undefined"!==typeof h.size&&(h=parseInt(h.size,10),d&&(b+=h),c&&h>this.MaxFileSize&&f.push({Name:k,Error:{Type:bbbfly.FileUploader.errortype.size,Data:this.MaxFileSize}}))}}1>f.length&&d&&b>this.MaxBatchSize&&f.push({Error:{Type:bbbfly.FileUploader.errortype.batch,Data:this.MaxBatchSize}});
if(0<f.length)return this.ShowError(f),!1}return!0};
bbbfly.fileuploader._addUploadedFiles=function(a){Object.isObject(a)&&(a=[a]);if(Array.isArray(a)){var b=this.GetUploadedFiles().length,c=[],d;for(d in a){var e=a[d];Object.isObject(e)&&(a.Error?c.push({Name:e.Name,Error:e.Error}):Number.isInteger(this.MaxFilesCount)&&b+1>this.MaxFilesCount?c.push({Name:e.Name,Error:{Type:bbbfly.FileUploader.errortype.count,Data:this.MaxFilesCount}}):this.AddFile(e)&&(b+=1))}0<c.length&&this.ShowError(c);Function.isFunction(this.OnFilesChanged)&&this.OnFilesChanged();
this.Update()}};bbbfly.fileuploader._addFile=function(a){if(!Object.isObject(a))return!1;var b={Id:a.Id,Name:a.Name};this._Files.push(b);var c=this.Controls.FilesList;c&&c.Add({ID:a.Id,File:b},c);return!0};
bbbfly.fileuploader._setDragAndDrop=function(a){var b=this.Controls.ContentPanel;b&&(b=b.Elm())&&Boolean.isBoolean(b.draggable)&&(a=a?bbbfly.fileuploader._addEvent:bbbfly.fileuploader._removeEvent,a(b,"drop",bbbfly.fileuploader._onDrop),a(b,"dragover",bbbfly.fileuploader._onDragOver),a(b,"dragleave",bbbfly.fileuploader._onDragLeave))};bbbfly.fileuploader._addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent(b,c)};
bbbfly.fileuploader._removeEvent=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent(b,c)};bbbfly.fileuploader._stopEvent=function(a){a||(a=window.event);a instanceof window.Event&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1)};
bbbfly.fileuploader._onDrop=function(a){bbbfly.fileuploader._stopEvent(a);var b=ngGetControlByElement(this);a=a.target.files||a.dataTransfer.files;Function.isFunction(b.OnFilesDrop)&&b.OnFilesDrop(a);return!1};bbbfly.fileuploader._onDragOver=function(a){bbbfly.fileuploader._stopEvent(a);a=ngGetControlByElement(this);Function.isFunction(a.OnFilesDragOver)&&a.OnFilesDragOver();return!1};
bbbfly.fileuploader._onDragLeave=function(a){bbbfly.fileuploader._stopEvent(a);a=ngGetControlByElement(this);Function.isFunction(a.OnFilesDragLeave)&&a.OnFilesDragOver();return!1};bbbfly.fileuploader._onFilesDrop=function(a){if(this.Enabled){var b=this.ParentControl;if(b.ValidateFiles(a)&&!(1>a.length)){var c=b.GetForm();c&&(c["files[]"].files=a,b.UploadFiles(c),c.reset())}}};
bbbfly.fileuploader._showError=function(a){if(Function.isFunction(this.DoShowError)){var b="";switch(this.ErrorLevel){case bbbfly.FileUploader.errorlevel.minimal:if(Object.isObject(a))b+=ngTxt("bbbfly_fileuploader_error_min_main");else if(Array.isArray(a)&&0<a.length){var c=ngTxt("bbbfly_fileuploader_error_min_general");b+=c.replace("%errs%",a.length+"x")}break;case bbbfly.FileUploader.errorlevel.grouped:Array.isArray(a)||(a=[a]);var d={},e;for(e in a){var f=a[e];if(Object.isObject(f)&&(c=f.Error,
Number.isInteger(c)&&(c={Type:c}),Object.isObject(c))){var g=f.Name;String.isString(g)||(g="?");c&&Number.isInteger(c.Type)&&(d[c.Type]||(d[c.Type]=[]),d[c.Type].push(g))}}for(var h in d)switch(a=0<d[h].length?""+d[h].length+"x":"",parseInt(h)){case bbbfly.FileUploader.errortype.main:c=ngTxt("bbbfly_fileuploader_error_grp_main");b+=c+"\n";break;case bbbfly.FileUploader.errortype.general:c=ngTxt("bbbfly_fileuploader_error_grp_general");b+=c.replace("%errs%",a)+"\n";break;case bbbfly.FileUploader.errortype.extension:a=
bbbfly.fileuploader._fileNameExtsToString(d[e]);c=ngTxt("bbbfly_fileuploader_error_grp_extension");b+=c.replace("%exts%",a)+"\n";break;case bbbfly.FileUploader.errortype.size:f=bbbfly.fileuploader._maxSize(this.MaxFileSize);c=ngTxt("bbbfly_fileuploader_error_grp_maxsize");b+=c.replace("%size%",f).replace("%errs%",a)+"\n";break;case bbbfly.FileUploader.errortype.batch:f=bbbfly.fileuploader._maxSize(this.MaxBatchSize);c=ngTxt("bbbfly_fileuploader_error_grp_batch");b+=c.replace("%size%",f).replace("%errs%",
a)+"\n";break;case bbbfly.FileUploader.errortype.count:f=bbbfly.fileuploader._maxCnt(this.MaxFilesCount),c=ngTxt("bbbfly_fileuploader_error_grp_maxcnt"),b+=c.replace("%cnt%",f).replace("%errs%",a)+"\n"}break;case bbbfly.FileUploader.errorlevel.fulllog:for(e in Array.isArray(a)||(a=[a]),a)if(f=a[e],Object.isObject(f)&&(c=f.Error,Number.isInteger(c)&&(c={Type:c}),Object.isObject(c)))switch(g=f.Name,String.isString(g)||(g="?"),c.Type){case bbbfly.FileUploader.errortype.main:c=ngTxt("bbbfly_fileuploader_error_full_main");
b+=c+"\n";break;case bbbfly.FileUploader.errortype.general:c=ngTxt("bbbfly_fileuploader_error_full_general");b+=c.replace("%file%",g)+"\n";break;case bbbfly.FileUploader.errortype.extension:c=ngTxt("bbbfly_fileuploader_error_full_extension");b+=c.replace("%file%",g)+"\n";break;case bbbfly.FileUploader.errortype.size:f=bbbfly.fileuploader._maxSize(this.MaxFileSize);c=ngTxt("bbbfly_fileuploader_error_full_maxsize");b+=c.replace("%file%",g).replace("%size%",f)+"\n";break;case bbbfly.FileUploader.errortype.batch:f=
bbbfly.fileuploader._maxSize(this.MaxBatchSize);c=ngTxt("bbbfly_fileuploader_error_full_batch");b+=c.replace("%size%",f)+"\n";break;case bbbfly.FileUploader.errortype.count:f=bbbfly.fileuploader._maxCnt(this.MaxFilesCount),c=ngTxt("bbbfly_fileuploader_error_full_maxcnt"),b+=c.replace("%cnt%",f)+"\n"}}this.DoShowError(b)}};
bbbfly.fileuploader._fileNameExtsToString=function(a){var b=[],c;for(c in a){var d=a[c];d=String.isString(d)?d.substring(d.indexOf(".")):"";b[d]?b[d]++:b[d]=1}a="";for(var e in b)a+=(a?", ":"")+b[e]+"x "+e;return a};bbbfly.fileuploader._maxSize=function(a){if(Number.isInteger(a)){var b=["B","kB","MB","GB"],c;for(c in b){if(1E3>a)return"("+Math.floor(10*a)/10+b[c]+")";a/=1E3}}return""};bbbfly.fileuploader._maxCnt=function(a){return Number.isInteger(a)?" ("+Math.floor(a)+")":""};
bbbfly.fileuploader._showProgress=function(a){var b=this.Controls.ProgressPanel,c=b.Controls.ProgressBar;a?c.StartProcess():this.UpdateProgress(0);b.SetVisible(!0)};bbbfly.fileuploader._updateProgress=function(a){var b=this.Controls.ProgressPanel.Controls.ProgressBar;Number.isNumber(a)||(a=0);b.EndProcess();b.SetProgress(a)};bbbfly.fileuploader._hideProgress=function(){this.Controls.ProgressPanel.SetVisible(!1);this.UpdateProgress(0)};
bbbfly.fileuploader._canAddFiles=function(){if(!Number.isInteger(this.MaxFilesCount))return!0;var a=this.GetUploadedFiles();return this.MaxFilesCount>a.length};bbbfly.fileuploader._canRemoveFiles=function(){var a=this.GetSelectedFiles();return Object.isObject(a)};bbbfly.fileuploader._onAddBtnUpdate=function(){this.Enabled=this.ParentControl.ParentControl.CanAddFiles();return!0};bbbfly.fileuploader._onRemoveBtnUpdate=function(){this.Enabled=this.ParentControl.ParentControl.CanRemoveFiles();return!0};
bbbfly.fileuploader._onRemoveBtnClick=function(){var a=this.ParentControl.ParentControl,b=a.GetSelectedFiles();if(!Object.isObject(b))return!1;for(var c=a.GetUploadedFiles(),d=c.length;0<d;d--){var e=d-1;b[c[e].Id]&&c.splice(e,1)}if(c=a.Controls.FilesList){c.BeginUpdate();for(var f in b)(b=c.FindItemByID(f))&&c.Remove(b);c.need_update=0;c.EndUpdate();Function.isFunction(a.OnFilesChanged)&&a.OnFilesChanged();a.Update()}};
bbbfly.fileuploader._onFilesListUpdate=function(){this.Invalid=!this.ParentControl.ParentControl.IsValid();return!0};bbbfly.fileuploader._onGetFilesListText=function(a,b,c){return"name"===c.ID&&b.File?b.File.Name:this.OnGetText.callParent(a,b,c)};bbbfly.fileuploader._onFilesListSelectChanged=function(){var a=this.ParentControl.ParentControl.Controls.ButtonsPanel;a&&a.Update()};
bbbfly.fileuploader._doUpdateAddBtn=function(a){if(!this.DoUpdate.callParent(a))return!1;var b=this.ParentControl.ParentControl,c=b.GetForm();!c&&a&&(c=b.CreateForm())&&a.appendChild(c);c&&(c.style.display=this.Enabled?"block":"none");return!0};bbbfly.fileuploader._getAddBtnText=function(){return 1<this.ParentControl.ParentControl.MaxFilesCount?ngTxt("bbbfly_fileuploader_add_more"):ngTxt("bbbfly_fileuploader_add_one")};
bbbfly.fileuploader._getRemoveBtnText=function(){return 1<this.ParentControl.ParentControl.MaxFilesCount?ngTxt("bbbfly_fileuploader_remove_more"):ngTxt("bbbfly_fileuploader_remove_one")};bbbfly.fileuploader._getProgressText=function(){return 1===this.ParentControl.ParentControl.MaxFilesCount?ngTxt("bbbfly_fileuploader_upload_one"):ngTxt("bbbfly_fileuploader_upload_more")};
bbbfly.fileloader._addFile=function(a){if(!Object.isObject(a))return!1;var b=this._ClientFileId++;b="__client_file_"+b+"__";this._Files.push({Id:b,Name:a.Name,Data:a.Data,DataType:a.DataType});var c=this.Controls.FilesList;c&&c.Add({ID:b,File:{Id:b,Name:a.Name}},c);return!0};bbbfly.fileloader._reset=function(){this._ClientFileId=0;this.Reset.callParent()};bbbfly.fileloader._uploadFiles=function(a){this.LoadFiles(a)||this.UploadFiles.callParent(a)};
bbbfly.fileloader._setLoadInfo=function(a,b,c,d){a=a._fileInfo;b.totalProgress+=c-a.progress;a.progress=c;d&&(d.Name=a.name,b.filesData.push(d));b.filesData.length>=b.filesCnt?(b.loader.AddUploadedFiles(b.filesData),b.loader.HideProgress()):b.loader.UpdateProgress(Math.floor(b.totalProgress/b.maxProgress*100))};
bbbfly.fileloader._loadFiles=function(a){if(!window.FileReader)return!1;a=this.GetFormFiles(a);if(1>a.length)return!1;var b={maxProgress:100*a.length,totalProgress:0,filesCnt:a.length,filesData:[],loader:this};this.ShowProgress(!1);for(var c in a){var d=a[c],e=new FileReader;e._fileInfo={name:d.name,progress:0};e.addEventListener("progress",function(a){a.lengthComputable&&bbbfly.fileloader._setLoadInfo(a.target,b,a.loaded/a.total*100,null)});e.addEventListener("error",function(a){bbbfly.fileloader._setLoadInfo(a.target,
b,100,{Error:{Type:bbbfly.FileUploader.errortype.general,Data:a.target.error.name}})});e.addEventListener("load",function(a){bbbfly.fileloader._setLoadInfo(a.target,b,100,{Data:a.target.result,DataType:bbbfly.FileLoader.datatype.buffer})});e.readAsArrayBuffer(d)}return!0};
bbbfly.FileUploader=function(a,b,c){a=a||{};ng_MergeDef(a,{ParentReferences:!1,Data:{UploadURL:null,FileUploadID:null,DragAndDrop:!0,MaxFileSize:void 0,MaxBatchSize:void 0,MinFilesCount:void 0,MaxFilesCount:void 0,AllowedExtensions:void 0,ErrorLevel:bbbfly.FileUploader.errorlevel.grouped,_Files:[],_RPC:null,_Form:null,_IFrame:null},Controls:{ButtonsPanel:{Type:"bbbfly.Panel",style:{zIndex:1},ParentReferences:!1,Controls:{AddFiles:{Type:"bbbfly.Button",Events:{OnUpdate:bbbfly.fileuploader._onAddBtnUpdate},
Methods:{GetText:bbbfly.fileuploader._getAddBtnText,DoUpdate:bbbfly.fileuploader._doUpdateAddBtn}},RemoveFiles:{Type:"bbbfly.Button",Events:{OnUpdate:bbbfly.fileuploader._onRemoveBtnUpdate,OnClick:bbbfly.fileuploader._onRemoveBtnClick},Methods:{GetText:bbbfly.fileuploader._getRemoveBtnText}}}},ContentPanel:{Type:"bbbfly.Panel",Controls:{FilesList:{Type:"bbbfly.List",style:{zIndex:1},Data:{SelectType:a.Data&&1===a.Data.MaxFilesCount?nglSelectNone:nglSelectMultiExt,ShowHeader:!1,Invalid:!0,Columns:{name:{TextRes:"bbbfly_fileuploader_file"}}},
Events:{OnUpdate:bbbfly.fileuploader._onFilesListUpdate,OnSelectChanged:bbbfly.fileuploader._onFilesListSelectChanged},OverrideEvents:{OnGetText:bbbfly.fileuploader._onGetFilesListText}}},Events:{OnFilesDrop:bbbfly.fileuploader._onFilesDrop,OnFilesDragOver:null,OnFilesDragLeave:null}},ProgressPanel:{Type:"bbbfly.Panel",L:0,R:0,T:0,B:0,style:{zIndex:3},ParentReferences:!1,Data:{Visible:!1},Controls:{ProgressBar:{Type:"bbbfly.ProgressBar"},ProgressMessage:{Type:"bbbfly.Text",Methods:{GetText:bbbfly.fileuploader._getProgressText}}}}},
OnCreated:bbbfly.fileuploader._onCreated,Events:{OnUpdated:bbbfly.fileuploader._onUpdated,OnGetRequestParams:null,OnFilesChanged:null},Methods:{GetRPC:bbbfly.fileuploader._getRPC,GetForm:bbbfly.fileuploader._getForm,GetIframe:bbbfly.fileuploader._getIframe,UpdateForm:bbbfly.fileuploader._updateForm,CreateRPC:bbbfly.fileuploader._createRPC,CreateForm:bbbfly.fileuploader._createForm,CreateIframe:bbbfly.fileuploader._createIframe,GetFormFiles:bbbfly.fileuploader._getFormFiles,ValidateFiles:bbbfly.fileuploader._validateFiles,
AddUploadedFiles:bbbfly.fileuploader._addUploadedFiles,AddFile:bbbfly.fileuploader._addFile,SetDragAndDrop:bbbfly.fileuploader._setDragAndDrop,Reset:bbbfly.fileuploader._reset,IsValid:bbbfly.fileuploader._isValid,UploadFiles:bbbfly.fileuploader._uploadFiles,GetUploadedFiles:bbbfly.fileuploader._getUploadedFiles,GetSelectedFiles:bbbfly.fileuploader._getSelectedFiles,ShowError:bbbfly.fileuploader._showError,ShowProgress:bbbfly.fileuploader._showProgress,UpdateProgress:bbbfly.fileuploader._updateProgress,
HideProgress:bbbfly.fileuploader._hideProgress,CanAddFiles:bbbfly.fileuploader._canAddFiles,CanRemoveFiles:bbbfly.fileuploader._canRemoveFiles,DoShowError:null}});return ngCreateControlAsType(a,"bbbfly.Frame",b,c)};bbbfly.FileUploader.errortype={main:1,general:2,extension:3,size:4,count:5,batch:6};bbbfly.FileUploader.errorlevel={minimal:1,grouped:2,fulllog:3};
bbbfly.FileLoader=function(a,b,c){a=a||{};ng_MergeDef(a,{Data:{_ClientFileId:0},Methods:{AddFile:bbbfly.fileloader._addFile,Reset:bbbfly.fileloader._reset,UploadFiles:bbbfly.fileloader._uploadFiles,LoadFiles:bbbfly.fileloader._loadFiles}});return ngCreateControlAsType(a,"bbbfly.FileUploader",b,c)};bbbfly.FileLoader.datatype={binary:0,text:1,base64:2,buffer:3};ngUserControls=ngUserControls||[];
ngUserControls.bbbfly_file={OnInit:function(){ngRegisterControlType("bbbfly.FileUploader",bbbfly.FileUploader);ngRegisterControlType("bbbfly.FileLoader",bbbfly.FileLoader)}};
