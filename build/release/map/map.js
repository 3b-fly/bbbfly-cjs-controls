/*!
 * @author Jan Nejedly support@3b-fly.eu
 * @copyright Jan Nejedly
 * @version 2.0.0
 * @license see license in 'LICENSE' file
*/

var bbbfly=bbbfly||{};bbbfly.map={map:{}};bbbfly.map.map._onCreated=function(a){a.CreateMap();return!0};bbbfly.map.map._onUpdated=function(){var a=this.GetMap();a&&"function"===typeof a.invalidateSize&&a.invalidateSize()};bbbfly.map.map._dispose=function(){this.DestroyMap();this.Dispose.callParent()};bbbfly.map.map._getMap=function(){return this._map};
bbbfly.map.map._createMap=function(){if(this.GetMap())return!0;var a={center:[0,0],zoom:0,fadeAnimation:!0,zoomAnimation:!0,markerZoomAnimation:!0};this.MaxBounds&&(a.maxBounds=this.MaxBounds);Number.isNumber(this.MinZoom)&&(a.minZoom=this.MinZoom,a.zoom=this.MinZoom);Number.isNumber(this.MaxZoom)&&(a.maxZoom=this.MaxZoom);a=this.DoCreateMap(a);if(!a)return!1;a.getZoom&&this.OnZoomChanged&&this.OnZoomChanged(a.getZoom());return!0};
bbbfly.map.map._doCreateMap=function(a){return!this.GetMap()&&this.Controls.Map&&(a=L.map(this.Controls.Map.ID,a))?(a.Owner=this,a.on("zoomend",bbbfly.map.map._onMapZoomEnd),this._map=a):null};bbbfly.map.map._destroyMap=function(){var a=this.GetMap();return a?(a.remove(),!0):!1};bbbfly.map.map._setMaxBounds=function(a){this.MaxBounds=a;var b=this.GetMap();b&&b.setMaxBounds(a);return!0};
bbbfly.map.map._setMinZoom=function(a){if(Number.isNumber(a)){this.MinZoom=a;var b=this.GetMap();b&&b.setMinZoom(a);return!0}return!1};bbbfly.map.map._setMaxZoom=function(a){if(Number.isNumber(a)){this.MaxZoom=a;var b=this.GetMap();b&&b.setMaxZoom(a);return!0}return!1};bbbfly.map.map._enableAnimation=function(a){if(a===this.Animate)return!1;this.Animate=!!a;return!0};
bbbfly.map.map._setView=function(a,b){var c=this.GetMap();if(c){if("undefined"===typeof a||null===a)a=c.getCenter();if("undefined"===typeof b||null===b)b=c.getZoom();c.setView(a,b,{animate:!!this.Animate});return!0}return!1};bbbfly.map.map._setZoom=function(a){return this.SetView(null,a)};bbbfly.map.map._getZoom=function(){var a=this.GetMap();return a?a.getZoom():null};bbbfly.map.map._zoomIn=function(a){var b=this.GetMap();return b?(b.zoomIn(a,{animate:!!this.Animate}),!0):!1};
bbbfly.map.map._zoomOut=function(a){var b=this.GetMap();return b?(b.zoomOut(a,{animate:!!this.Animate}),!0):!1};bbbfly.map.map._setCenter=function(a){return this.SetView(a,null)};bbbfly.map.map._getCenter=function(){var a=this.GetMap();return a?a.getCenter():null};bbbfly.map.map._onMapZoomEnd=function(a){if((a=a.target)&&"function"===typeof a.getZoom){var b=a.Owner;b&&"function"===typeof b.OnZoomChanged&&b.OnZoomChanged(a.getZoom())}};
bbbfly.Map=function(a,b,c){a=a||{};ng_MergeDef(a,{ParentReferences:!1,Data:{MaxBounds:null,MinZoom:null,MaxZoom:null,Animate:!0,_map:null},OnCreated:bbbfly.map.map._onCreated,ControlsPanel:{ScrollBars:ssNone},Controls:{Map:{Type:"ngPanel",L:0,R:0,T:0,B:0,style:{zIndex:1}}},Events:{OnUpdated:bbbfly.map.map._onUpdated,OnZoomChanged:null},Methods:{Dispose:bbbfly.map.map._dispose,GetMap:bbbfly.map.map._getMap,CreateMap:bbbfly.map.map._createMap,DoCreateMap:bbbfly.map.map._doCreateMap,DestroyMap:bbbfly.map.map._destroyMap,
SetMaxBounds:bbbfly.map.map._setMaxBounds,SetMinZoom:bbbfly.map.map._setMinZoom,SetMaxZoom:bbbfly.map.map._setMaxZoom,EnableAnimation:bbbfly.map.map._enableAnimation,SetView:bbbfly.map.map._setView,SetZoom:bbbfly.map.map._setZoom,GetZoom:bbbfly.map.map._getZoom,ZoomIn:bbbfly.map.map._zoomIn,ZoomOut:bbbfly.map.map._zoomOut,SetCenter:bbbfly.map.map._setCenter,GetCenter:bbbfly.map.map._getCenter}});return ngCreateControlAsType(a,"ngGroup",b,c)};ngUserControls=ngUserControls||[];
ngUserControls.bbbfly_map={OnInit:function(){ngRegisterControlType("bbbfly.Map",bbbfly.Map)}};
