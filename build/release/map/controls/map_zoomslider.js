/*!
 * @author Jan Nejedly support@3b-fly.eu
 * @copyright Jan Nejedly
 * @version 2.0.1
 * @license see license in 'LICENSE' file
*/

var bbbfly=bbbfly||{};bbbfly.map=bbbfly.map||{};bbbfly.map.control=bbbfly.map.control||{};bbbfly.map.control.zoomslider={control_type:"zoomSlider"};bbbfly.map.control.zoomslider._onLinkedToMap=function(){this.ShowMapZoom()};bbbfly.map.control.zoomslider._createListener=function(){return{Listen:["OnZoomChanged"],OnZoomChanged:bbbfly.map.control.zoomslider._onZoomChanged}};bbbfly.map.control.zoomslider._onZoomChanged=function(){this.Owner.ShowMapZoom()};
bbbfly.map.control.zoomslider._showZoom=function(a,c,b){"number"===typeof a&&("undefined"!==typeof c&&(this._minZoom=c),"undefined"!==typeof b&&(this._maxZoom=b),this._zoom=a,this.Controls.ZoomIn.SetEnabled("number"!==typeof this._maxZoom||this._maxZoom>a),this.Controls.ZoomOut.SetEnabled("number"!==typeof this._minZoom||this._minZoom<a),this.Controls.Slider.Update())};bbbfly.map.control.zoomslider._showMapZoom=function(){var a=this.GetMap();a&&this.ShowZoom(a.GetZoom(),a.GetMinZoom(),a.GetMaxZoom())};
bbbfly.map.control.zoomslider._zoomIn=function(){var a=this.Owner.Owner.GetMap();return a?a.ZoomIn(1):flase};bbbfly.map.control.zoomslider._zoomOut=function(){var a=this.Owner.Owner.GetMap();return a?a.ZoomOut(1):!1};bbbfly.map.control.zoomslider._onSliderCatcherCreated=function(a){ngc_PtrEvents(a,"zoomSlider","drag tap");a.GetPointerPos=ngc_GetPointerPos;a.OnPtrDrag=bbbfly.map.control.zoomslider._onSliderPtrDrag;a.OnPtrEnd=bbbfly.map.control.zoomslider._onSliderPtrEnd;return!0};
bbbfly.map.control.zoomslider._onSliderUpdate=function(){var a=this.Owner.Owner,c=this.Controls.Handle,b=this.ControlsPanel?this.ControlsPanel.Elm():this.Elm();ng_BeginMeasureElement(b);var f=this.Vertical?ng_ClientHeight(b):ng_ClientWidth(b);ng_EndMeasureElement(b);b="number"===typeof this.HandleIndent?this.HandleIndent:0;a=Math.floor((f-2*b)/(a._maxZoom-a._minZoom)*(a._maxZoom-a._zoom)+b);c.SetBounds(this.Vertical?{T:a}:{L:a})};
bbbfly.map.control.zoomslider._onSliderPtrDrag=function(a,c){a.Owner.Owner.OnSelected(a,c,!1);return!0};bbbfly.map.control.zoomslider._onSliderPtrEnd=function(a,c){var b=a.Owner.Owner,f=b.Owner.Owner.GetMap();f&&(a=b.OnSelected(a,c,!0),f.SetZoom(a));return!0};
bbbfly.map.control.zoomslider._onSliderSelected=function(a,c,b){b=a.Owner.Owner;var f=b.Owner.Owner,h=b.Controls.Handle,e=a.Elm();ng_BeginMeasureElement(e);var d=ng_ParentPosition(e);a=b.Vertical?ng_ClientHeight(e):ng_ClientWidth(e);d=b.Vertical?c.Y-d.y:c.X-d.x;ng_EndMeasureElement(e);c=Number.isNumber(b.HandleIndent)?b.HandleIndent:0;e=f._maxZoom-f._minZoom;a=(a-2*c)/e;var g=(d-c)/a;d=Math.floor(g);.5<g-d&&d++;0>d?d=0:d>e&&(d=e);a=Math.floor(d*a+c);h.SetBounds(b.Vertical?{T:a}:{L:a});return f._maxZoom-
d};
bbbfly.MapZoomSlider=function(a,c,b){a=a||{};ng_MergeDef(a,{Data:{ControlType:bbbfly.map.control.zoomslider.control_type,_zoom:null,_minZoom:null,_maxZoom:null},Controls:{ZoomIn:{Type:"bbbfly.Button",Events:{Data:{AltRes:"bbbfly_map_control_zoomslider_zoomin"},OnClick:bbbfly.map.control.zoomslider._zoomIn}},ZoomOut:{Type:"bbbfly.Button",Events:{Data:{AltRes:"bbbfly_map_control_zoomslider_zoomout"},OnClick:bbbfly.map.control.zoomslider._zoomOut}},Slider:{Type:"bbbfly.Panel",ParentReferences:!1,Data:{Vertical:!0,
HandleIndent:0,ChildHandling:ngChildEnabledParentAware},Controls:{Rail:{Type:"bbbfly.Panel",style:{zIndex:1}},Handle:{Type:"bbbfly.Panel",style:{zIndex:2}},PtrCatcher:{Type:"bbbfly.Panel",L:0,R:0,T:0,B:0,style:{zIndex:3,cursor:"pointer"},OnCreated:bbbfly.map.control.zoomslider._onSliderCatcherCreated}},Events:{OnUpdated:bbbfly.map.control.zoomslider._onSliderUpdate,OnSelected:bbbfly.map.control.zoomslider._onSliderSelected}}},Events:{OnLinkedToMap:bbbfly.map.control.zoomslider._onLinkedToMap},Methods:{CreateListener:bbbfly.map.control.zoomslider._createListener,
ShowZoom:bbbfly.map.control.zoomslider._showZoom,ShowMapZoom:bbbfly.map.control.zoomslider._showMapZoom}});return ngCreateControlAsType(a,"bbbfly.MapControl",c,b)};ngUserControls=ngUserControls||[];ngUserControls.bbbfly_map_control_zoomslider={OnInit:function(){ngRegisterControlType("bbbfly.MapZoomSlider",bbbfly.MapZoomSlider)}};
